{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport const fetchPhotosByQuery = (searchedEl, currentPage) => {\n  const searchParams = new URLSearchParams({\n    q: searchedEl,\n    key: '48271312-da0ca2419705a10e0da77e3e9',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: currentPage,\n    per_page: 15,\n  });\n\n  return axios.get(`https://pixabay.com/api/?${searchParams}`, searchParams);\n};\n","// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const createGalleryCardTemplate = imgInfo => {\n  return `\n    <li class=\"gallery-card\">\n      <a class=\"gallery-link\"  href=\"${imgInfo.largeImageURL}\">\n        <img class=\"gallery-img\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" /> \n        <ul class=\"text-info\">\n          <li class=\"image-info\">\n            <h4>Likes</h4>\n            <p>${imgInfo.likes}</p>\n          </li>\n          <li class=\"image-info\">\n            <h4>Views</h4>\n            <p>${imgInfo.views}</p>\n          </li>\n          <li class=\"image-info\">\n            <h4>Comments</h4>\n            <p>${imgInfo.comments}</p>\n          </li>\n          <li class=\"image-info\">\n            <h4>Downloads</h4>\n            <p>${imgInfo.downloads}</p>\n        </ul>\n        </a>\n    </li>\n  `;\n};\n","import { createGalleryCardTemplate } from './js/render-functions.js';\nimport { fetchPhotosByQuery } from './js/pixabay-api.js';\n\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst searchForm = document.querySelector('.searchForm');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nlet imgBox = '';\n\nconst lightbox = new SimpleLightbox('.gallery a');\n\nlet page = 1;\nlet searchedEl = '';\nlet perPage = 15;\n\nloadMoreBtn.classList.add('is-hidden');\n\nconst searchSubmit = async event => {\n  const loader = document.querySelector('.loader');\n  try {\n    event.preventDefault();\n\n    searchedEl = searchForm.elements[0].value.trim();\n\n    if (searchedEl === '') {\n      iziToast.error({\n        title: '',\n        message: 'Please enter your request',\n        messageColor: '#fafafb',\n        position: 'topRight',\n        backgroundColor: '#ef4040',\n      });\n\n      return;\n    }\n\n    page = 1;\n\n    loadMoreBtn.classList.add('is-hidden');\n    loader.classList.add('show-loader');\n\n    const { data } = await fetchPhotosByQuery(searchedEl, page);\n\n    if (data.total === 0) {\n      iziToast.error({\n        title: '',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: '#fafafb',\n        position: 'topRight',\n        backgroundColor: '#ef4040',\n      });\n\n      gallery.innerHTML = '';\n\n      searchForm.reset();\n\n      return;\n    }\n\n    if (data.totalHits > 1) {\n      loadMoreBtn.classList.remove('is-hidden');\n\n      loadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\n    }\n\n    const galleryTemplate = data.hits\n      .map(el => createGalleryCardTemplate(el))\n      .join('');\n\n    gallery.innerHTML = galleryTemplate;\n    lightbox.refresh();\n  } catch (err) {\n    console.log(err);\n  } finally {\n    loader.classList.remove('show-loader');\n  }\n};\n\nsearchForm.addEventListener('submit', searchSubmit);\n\nconst onLoadMoreBtnClick = async event => {\n  try {\n    const endMessage = document.querySelector('.endResults');\n\n    const { data } = await fetchPhotosByQuery(searchedEl, page);\n\n    page += 1;\n\n    const galleryTemplate = data.hits\n      .map(el => createGalleryCardTemplate(el))\n      .join('');\n\n    gallery.insertAdjacentHTML('beforeend', galleryTemplate);\n\n    imgBox = document.querySelector('.gallery-card').getBoundingClientRect();\n    let imgHeight = imgBox.height;\n\n    window.scrollBy({\n      top: imgHeight * 2,\n      behavior: 'smooth',\n    });\n\n    if (page * perPage >= data.totalHits) {\n      loadMoreBtn.classList.add('is-hidden');\n      iziToast.show({\n        title: '',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        color: 'blue',\n      });\n\n      loadMoreBtn.removeEventListener('click', onLoadMoreBtnClick);\n    }\n  } catch (err) {\n    console.log(err);\n  }\n};\n"],"names":["fetchPhotosByQuery","searchedEl","currentPage","searchParams","axios","createGalleryCardTemplate","imgInfo","searchForm","gallery","loadMoreBtn","imgBox","lightbox","SimpleLightbox","page","perPage","searchSubmit","event","loader","iziToast","data","onLoadMoreBtnClick","galleryTemplate","el","err","endMessage","imgHeight"],"mappings":"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"}